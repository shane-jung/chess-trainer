{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shane\\\\Documents\\\\Projects\\\\chess-trainer\\\\src\\\\ChessBoard.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport decodeFEN from \"./FENtoBoard\";\nimport useAction, { setBoardAction, setMoveNumberAction } from \"./actions\";\nimport { selectFen, selectStringFEN } from \"./slices/game\";\nimport Grid from \"@mui/material/Grid\";\nimport Square from \"./Square\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChessBoard = () => {\n  _s();\n  const fen = useSelector(selectFen);\n  const stringFEN = useSelector(selectStringFEN);\n  const setBoard = useAction(setBoardAction);\n  const setMoveNumber = useAction(setMoveNumberAction);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [handleKeyDown]);\n  function handleKeyDown(e) {\n    if (e.key === \"ArrowLeft\") {\n      setMoveNumber(-1);\n    } else if (e.key === \"ArrowRight\") {\n      setMoveNumber(1);\n    }\n  }\n  useEffect(() => {\n    setBoard(decodeFEN(stringFEN));\n  }, [stringFEN, setBoard]);\n  useEffect(() => {\n    if (checkGameOver(fen)) {\n      console.log(\"GAME OVER\");\n      return;\n    }\n  }, [fen]);\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 0,\n    id: \"board\",\n    draggable: \"false\",\n    direction: \"row-reverse\",\n    children: Array.from(new Array(8)).map((_, rank) => /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      item: true,\n      xs: 12,\n      spacing: 0,\n      children: [rank + 1, Array.from(new Array(8)).map((_, file) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 1,\n        children: [/*#__PURE__*/_jsxDEV(Square, {\n          index: rank * 8 + file\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this), rank === 7 ? file + 1 : \"\"]\n      }, `${file}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this))]\n    }, `${rank}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(ChessBoard, \"m9uFY/0M2P9P6Czbov+2Dl7kFaA=\", false, function () {\n  return [useSelector, useSelector, useAction, useAction];\n});\n_c = ChessBoard;\nexport default ChessBoard;\nfunction checkGameOver(fen) {\n  const board = fen.board;\n  const turn = fen.turn;\n  const color = turn === \"w\" ? 0b1000 : 0b10000;\n  const king = color | pieceTypes.King;\n  const kingIndex = board.indexOf(king);\n  const legalKingMoves = calculateLegalMovesForPiece(fen, kingIndex);\n  // console.log(legalMoves, isKingAttacked(fen, kingIndex));\n  return legalKingMoves.length === 0 && isKingAttacked(fen, color) && calculateLegalMoves(fen, color).length === 0;\n}\nvar _c;\n$RefreshReg$(_c, \"ChessBoard\");","map":{"version":3,"names":["useEffect","useSelector","decodeFEN","useAction","setBoardAction","setMoveNumberAction","selectFen","selectStringFEN","Grid","Square","jsxDEV","_jsxDEV","ChessBoard","_s","fen","stringFEN","setBoard","setMoveNumber","window","addEventListener","handleKeyDown","removeEventListener","e","key","checkGameOver","console","log","container","spacing","id","draggable","direction","children","Array","from","map","_","rank","item","xs","file","index","fileName","_jsxFileName","lineNumber","columnNumber","_c","board","turn","color","king","pieceTypes","King","kingIndex","indexOf","legalKingMoves","calculateLegalMovesForPiece","length","isKingAttacked","calculateLegalMoves","$RefreshReg$"],"sources":["C:/Users/shane/Documents/Projects/chess-trainer/src/ChessBoard.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport decodeFEN from \"./FENtoBoard\";\r\n\r\nimport useAction, { setBoardAction, setMoveNumberAction } from \"./actions\";\r\nimport {\r\n  selectFen,\r\n  selectStringFEN,\r\n} from \"./slices/game\";\r\n\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Square from \"./Square\";\r\n\r\nconst ChessBoard = () => {\r\n  const fen = useSelector(selectFen);\r\n  const stringFEN = useSelector(selectStringFEN);\r\n  const setBoard = useAction(setBoardAction);\r\n  const setMoveNumber = useAction(setMoveNumberAction);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [handleKeyDown]);\r\n\r\n  function handleKeyDown(e) {\r\n    if (e.key === \"ArrowLeft\") {\r\n      setMoveNumber(-1);\r\n    } else if (e.key === \"ArrowRight\") {\r\n      setMoveNumber(1);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setBoard(decodeFEN(stringFEN));\r\n  }, [stringFEN, setBoard]);\r\n\r\n  useEffect(()=>{\r\n    if (checkGameOver(fen)) {\r\n      console.log(\"GAME OVER\");\r\n      return;\r\n    }\r\n  }, [fen])\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={0}\r\n      id=\"board\"\r\n      draggable=\"false\"\r\n      direction=\"row-reverse\"\r\n    >\r\n      {Array.from(new Array(8)).map((_, rank) => (\r\n        <Grid key={`${rank}`} container item xs={12} spacing={0}>\r\n          {rank + 1}\r\n          {Array.from(new Array(8)).map((_, file) => (\r\n            <Grid key={`${file}`} item xs={1}>\r\n              <Square index={rank * 8 + file} />\r\n              {rank === 7 ? file + 1 : \"\"}\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ChessBoard;\r\n\r\n\r\n\r\nfunction checkGameOver(fen) {\r\n  const board = fen.board;\r\n  const turn = fen.turn;\r\n  const color = turn === \"w\" ? 0b1000 : 0b10000;\r\n  const king = color | pieceTypes.King;\r\n  const kingIndex = board.indexOf(king);\r\n  const legalKingMoves = calculateLegalMovesForPiece(fen, kingIndex);\r\n  // console.log(legalMoves, isKingAttacked(fen, kingIndex));\r\n  return (\r\n    legalKingMoves.length === 0 &&\r\n    isKingAttacked(fen, color) &&\r\n    calculateLegalMoves(fen, color).length === 0\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}